<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
			<link rel="stylesheet", href="/stylesheets/style.css" />
			<!-- Load the Paper.js library -->
			<script type="text/javascript" src="Paper/docs/assets/js/paper.js"></script>
			<!-- Define inlined PaperScript associate it with myCanvas -->
			<script type="text/paperscript" canvas="myCanvas">
	
var ws = new WebSocket("wss://localhost:4710/");

var radius = 30;
var path = new Path.Circle(new Point(500, 300), radius);
path.fillColor = 'black';

// connexion au serveur
ws.onopen = function (event) 
{
  	console.log("I'm here");
};


// envoi click au serveur
function onMouseUp(event) 
{
	var pt = new Point(event.Point);
	var message = { 
				type : "clic",
				posx : pt.x,
				posy : pt.y
		};
		ws.send(JSON.stringify(message));
}


//Reception de message
ws.onmessage = function (message) 
{ 
	var msg = JSON.parse(message.data);

	
	switch(msg.type)
	{

		case "corps" :
			path.position = msg.pos;
			//candy.fillColor.hue += 1;
			/*
			var i = 0;

			if (msg.posqueue.length > elem.length)
			{
				elem.push(new Path.Circle(new Point(0, 0), radius));
			}


			while(i<elem.length)
			{
				elem[i].position = msg.posqueue[i];
				i++;
			}
		
		case "candy" :
			candy.position = msg.pos; 		*/	
	}

};
			</script>
	</head>
	<body>
		<canvas id="myCanvas" width=1300 height=570></canvas>
	</body>
</html>